if("undefined"===typeof ZDVTools){var ZDVTools={version:20160515,self:null,win:window,enableDebug:!1,enableMutations:!1,slowAdThreshold:25E3,onViewable:[],onLoaded:[],roundTiming:function(a){return+(Math.round(a/1E3+"e+3")+"e-3")},timings:{init:{timestamp:(new Date).getTime(),timing:window.performance&&performance.now?+(Math.round(window.performance.now()/1E3+"e+3")+"e-3"):null},DFPinit:{timestamp:null,timing:null}},ads:{},_observer:null,_options:null,_tickerInterval:null,_UUID:null,_msgs:"",_isIFrame:window==
window.top?!1:!0,proto:window.location&&window.location.protocol&&0==window.location.protocol.toLowerCase().indexOf("https")?"https:":"http:",throttleDown:function(){var a=ZDVTools;a._tickerInterval&&a.win.clearInterval(a._tickerInterval);a._tickerInterval=a.win.setInterval(a._tick,150);a.debug("ZDVTools: Slowing down watchdog")},stop:function(){var a=ZDVTools;a._tickerInterval&&a.win.clearInterval(a._tickerInterval);a._observer&&a._observer.disconnect()},debug:function(a,b){window.console&&(window.ZDVTools||
parent.ZDVTools||top.ZDVTools).enableDebug&&(b||(b="green"),console.log("%c"+a,"color: "+b))},generateUUID:function(){return"xxxxxxxxxxxxxyxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},trackZDBB:function(a,b,c,d){var f=ZDVTools;d&&(b||(b=f.win.document.getElementById(d.iframeId)),c||(c=d.name));c||(c=f.getName(b));d||(d=f.getAd());if(!d.DFA||d.creativeId){try{var e=f.win.location.hostname}catch(h){}f.debug("ZDVTools: AD "+a+": "+c+
" "+d.size+" "+d[a.toLowerCase().replace("moatviewable","moatViewable").replace("moatfullviewable","moatFullViewable")].timing);b=f.win.googletag||null;var g=d.uuid?d.uuid:d.slot&&d.slot.getTargeting("zc")?d.slot.getTargeting("zc")[0]:"";a=[f.proto+"//zdbb.net/n/WU2TPsgLEeSUDxIxPSpF6g?agent=zdvtool","iver="+encodeURIComponent(f.version),"host="+encodeURIComponent(e||""),"ev="+encodeURIComponent(a||""),"li="+encodeURIComponent(d.lineItemId||""),"cid="+encodeURIComponent(d.creativeId||""),"slot="+encodeURIComponent(d.adUnitPath||
""),"size="+encodeURIComponent(d.size||""),"name="+encodeURIComponent(c),"corrid="+encodeURIComponent(d.correlatorId||b&&b.pubads?b.pubads().getCorrelator()||"":""),"ptime="+encodeURIComponent(f.timings.DFPinit.timing||""),"dtime="+encodeURIComponent(d.DFPRendered?d.DFPRendered.timing:""),"stime="+encodeURIComponent(d.loaded?d.loaded.timing:""),"ftime="+encodeURIComponent(d.viewable?d.viewable.timing:""),"moatftime="+encodeURIComponent(d.moatViewable?d.moatViewable.timing:""),"moat100ftime="+encodeURIComponent(d.moatFullViewable?
d.moatFullViewable.timing:""),"zc="+encodeURIComponent(g||""),"zcp="+encodeURIComponent(f._UUID||""),"refresh="+encodeURIComponent(d.refresh||""),"err="+encodeURIComponent(d.errors?d.errors.join(","):""),"adtype="+encodeURIComponent(d.DFA?"dfa":d.safeFrame?"safeFrame":"fif"),"actview="+encodeURIComponent(d.activeViewEngine||"")];c=f.win.document.createElement("img");c.width=1;c.height=1;c.alt="zdvtools";c.style.position="absolute";c.src=a.join("&");f.debug("ZDVTools BBPIXEL: "+c.src,"blue");return!0}},
getName:function(a){try{var b="string"===typeof a?a:a.id;if(-1!==b.indexOf("DfpVisibilityIdentifier_"))return b;var c=b.match(/google_ads_iframe_(.+)/)[1];return c&&-1==c.indexOf("__hidden")?c:null}catch(d){return null}},getAd:function(a,b){if(!a)return null;var c=ZDVTools;"undefined"===typeof c.ads[a]&&(c.ads[a]=[]);var d=c.ads[a]&&0<c.ads[a].length?c.ads[a].length-1:0;b&&c.ads[a]&&"undefined"!==typeof c.ads[a][d]&&c.ads[a][d].DFPRendered&&(d+=1);if("undefined"===typeof c.ads[a][d]){var f={timestamp:(new Date).getTime(),
timing:c.roundTiming(c.win.performance.now())};c.ads[a].push({name:a,iframeId:null,adUnitPath:null,init:f,loaded:null,viewable:null,moatViewable:null,moatFullViewable:null,creativeId:null,lineItemId:null,containerId:null,size:null,width:null,height:null,slot:null,uuid:null,safeFrame:!1,errors:[],refresh:d,DFPRendered:!1,slowAd:null,isEmpty:!1,activeViewEngine:null,DFA:null});c.slowAdThreshold&&(c.ads[a][d].slowAd=c.win.setTimeout(function(){var b=c.ads[a][d];try{b.DFA||(document.getElementById(b.iframeId).contentWindow.document.body.innerHTML||
b.isEmpty?b.errors.push("SLOWAD"):b.errors.push("EMPTYAD"))}catch(f){b.errors.push("SLOWAD")}b.slowAd=null},c.slowAdThreshold))}return c.ads[a][d]},_adLoaded:function(a,b){a&&a.tagName&&a.id||(a=this);if(!a||!a.src||"about:blank"!==a.src){var c=ZDVTools,d=c.getName(a);if(d){if(b||(b=c.getAd(d)),!b.loaded){b.loaded={timestamp:(new Date).getTime(),timing:c.roundTiming(c.win.performance.now())};try{b.iframeId&&!document.getElementById(b.iframeId).contentWindow.document.body.innerHTML&&b.errors.push("EMPTYAD")}catch(e){}c.trackZDBB("LOADED",
a,d,b);if(b.slowAd)try{c.win.clearTimeout(b.slowAd),b.slowAd=null}catch(e){}for(d=0;d<c.onLoaded.length;d++)c.onLoaded[d](b);try{var c={},f;for(f in b)"slot"!=f&&(c[f]=b[f]);window.postMessage({agent:"zdvtool",event:"adLoaded",elementId:b.containerId,ad:c},"*")}catch(e){}}}else c.debug("ZDVTools sanity error on ad loaded "+a.id)}},_adViewable:function(a,b,c,d,f){var e=ZDVTools;try{if(window.parent!=window&&window.parent.ZDVTools)return window.parent.ZDVTools.adViewable(a,b,c,d,f)}catch(l){}a||(a=
this);b||(b=e.getName(a));if(b){c||(c=e.getAd(b));var g=c.loaded,h="viewable";f&&"moatfull"==f?h="moatFullViewable":f&&(h="moatViewable");if("undefined"===typeof c[h]||null==c[h]||"undefined"===typeof c[h].timestamp||!c[h].timestamp){g&&g.timing?c[h]={timestamp:(new Date).getTime(),timing:Number(Math.round(e.roundTiming(e.win.performance.now())-g.timing+"e3")+"e-3")}:(e.debug("ZDVTools sanity error: ad viewable but not loaded - "+h+" - "+a.id),c[h]={timestamp:(new Date).getTime(),timing:-e.roundTiming(e.win.performance.now())});
d&&(-1!=d.indexOf("id=osdim")?c.activeViewEngine="osdim":-1!=d.indexOf("id=lidar")&&(c.activeViewEngine="lidar"));e.trackZDBB(h.toUpperCase(),a,b,c);if(e.onViewable&&c.viewable&&d)for(a=0;a<e.onViewable.length;a++){try{e.enableDebug&&(e.debug("Invoking Callback - "+h),console.log(e.onViewable[a]))}catch(l){}try{e.onViewable[a](c)}catch(l){}}try{var e={},k;for(k in c)"slot"!=k&&(e[k]=c[k]);window.postMessage({agent:"zdvtools",event:h.toUpperCase(),elementId:c.containerId,ad:e},"*")}catch(l){}}}else e.debug("ZDVTools sanity error on ad viewable: can't find iframe "+
a.id)},_MoatCallback:function(a){if(a.wasViewable||a.wasViewableGroupM)try{var b=window.top.ZDVTools;if(!b)throw"Missing ZDVTool from top window";b.enableDebug&&window.JSON&&window.JSON.stringify&&b.debug("ZDVTools MOAT CALLBACK: "+window.JSON.stringify(a),"blue");if(window.frameElement)a.wasViewable&&b._adViewable(window.frameElement,null,null,"","moat"),a.wasViewableGroupM&&b._adViewable(window.frameElement,null,null,"","moatfull");else for(var c in b.ads){var d=b.ads[c],f=d[d.length-1];a.adIds&&
3<a.adIds.length&&a.adIds[2]==f.lineItemId&&a.adIds[3]==f.creativeId&&!f.viewable&&(a.wasViewable&&!f.moatViewable&&b._adViewable(document.getElementById(f.name),f.name,f,"","moat"),a.wasViewableGroupM&&!f.moatFullViewable&&b._adViewable(document.getElementById(f.name),f.name,f,"","moatfull"))}}catch(e){try{parent.postMessage({agent:"zdvtoolsSafeFrame",event:a.wasViewableGroupM?"MOATFULLVIEWABLE":"MOATVIEWABLE",url:a.wasViewableGroupM?"moatfull":"moat",name:window.name,safeFrameUrl:window.location.href,
safeFrameId:""},"*")}catch(g){}}},_initDFAUnit:function(a,b){var c=ZDVTools;b.containerId=a.parentNode.id||a.id;b.DFA={id:a.id,avi:a._avi_,cid:a._cid_,url:""};var d=a.getElementsByTagName("iframe")?a.getElementsByTagName("iframe")[0]:null;d&&(b.iframeId=d.id,b.width=d.offsetWidth||parseInt(d.width||"0")||null,b.height=d.offsetHeight||parseInt(d.height||"0")||null,"undefined"==b.width||"undefined"==b.height)&&(b.width=null,b.height=null);b.width&&b.height&&(b.size=b.width+"x"+b.height);b.DFPRendered=
{timestamp:(new Date).getTime(),timing:c.roundTiming(c.win.performance.now())};b.loaded={timestamp:(new Date).getTime(),timing:c.roundTiming(c.win.performance.now())};if(b.slowAd)try{c.win.clearTimeout(b.slowAd),b.slowAd=null}catch(e){}c._initDFAMoat(a,b);for(var d=a.parentNode.getElementsByTagName("script"),f=0;f<d.length;f++)if(c=d[f],c.src&&(-1!=c.src.indexOf("//ad2.netshelter.net/adj/")||-1!=c.src.indexOf("//ad.doubleclick.net/adj/"))){d=c.src.replace("//ad2.netshelter.net/adj/","//ad.doubleclick.net/adj/");
b.DFA.url=c.src.replace(/ord=([0-9]+)/g,"").replace("?","");try{b.adUnitPath=d.match(/ad.doubleclick.net\/adj\/([^;]+)/gi)[0].replace("ad.doubleclick.net/adj","").replace(/ /g,"_"),d.match(/ppos=(.+);/)&&(b.adUnitPath+="/"+d.match(/ppos=(.+?);/)[1].toUpperCase())}catch(e){}if(!b.width||!b.size)try{b.size=sdfaSrc.match(/sz=([0-9x,]+);/i)[1].split(",")[0],b.width=parseInt(b.size.split("x")[0])||0,b.height=parseInt(b.size.split("x")[1])||0}catch(e){}break}return b},_initDFAMoat:function(a,b){if(!b.lineItemId)for(var c=
ZDVTools,d=a.getElementsByTagName("script")||[],f=0;f<d.length;f++){var e=d[f];e.src&&-1!=e.src.indexOf("js.moatads.com/ziffdaviscwnew43828694654/moatad.js")&&(e=e.src,b.lineItemId=e.match(/&moatClientLevel3=([0-9]+)&/)?e.match(/&moatClientLevel3=([0-9]+)&/)[1]:b.lineItemId,b.creativeId=e.match(/&moatClientLevel4=([0-9]+)&/)?e.match(/&moatClientLevel4=([0-9]+)&/)[1]:b.creativeId,b.uuid=e.match(/&zMoatImpCorrelator=([a-z0-9-]+)/i)?e.match(/&zMoatImpCorrelator=([a-z0-9-]+)/)[1]:b.uuid,c._UUID||(c._UUID=
e.match(/&zMoatPVCorrelator=([a-z0-9-]+)/i)?e.match(/&zMoatPVCorrelator=([a-z0-9-]+)/)[1]:c._UUID),b.creativeId&&(b.loaded=null,c._adLoaded(a)))}},_tickDFA:function(){var a=ZDVTools;if(a.win.document.getElementsByClassName)for(var b=a.win.document.getElementsByClassName("GoogleActiveViewClass"),c=0;c<b.length;c++){var d=b[c],f=a.getName(d);if(f){var e=a.getAd(f);e.DFA&&e.DFA.avi||!d._avi_||a._initDFAUnit(d,e);e.creativeId||a._initDFAMoat(d,e);if(!e.viewable&&e.DFA&&e.DFA.avi&&window.google_image_requests&&
window.google_image_requests.length)for(var g=0;g<window.google_image_requests.length;g++){var h=window.google_image_requests[g].src;h&&-1==a._msgs.indexOf(h+" ")&&(-1!=h.indexOf("pagead2.googlesyndication.com/activeview?")&&-1!=h.indexOf("&avi="+e.DFA.avi+"&cid="+e.DFA.cid)&&(e.activeViewEngine=h.match(/\activeview?id=([a-z]+)&/i)?h.match(/\activeview?id=([a-z]+)&/i)[1]:"lidar",a._adViewable(d,f,e,h)),a._msgs+=h+" ")}}}},_tick:function(){for(var a=ZDVTools,b=a.win.document.getElementsByTagName("iframe"),
c=0;c<b.length;c++){var d=b[c],f=a.getName(d);if(f){var e=a.getAd(f),g=null;d._ZDVToolsOnLoad||(d.addEventListener("load",a._adLoaded,!1),d._ZDVToolsOnLoad=!0);!e.containerId&&d.parentNode&&d.parentNode.parentNode&&(e.containerId=d.parentNode.parentNode.id||d.parentNode.id);e.iframeId||(e.iframeId=d.id);if(!e.safeFrame){try{g=d.contentWindow&&d.contentWindow.document?d.contentWindow:null}catch(l){e.safeFrame=!0;d.contentWindow&&d.contentWindow.postMessage&&d.contentWindow.postMessage({agent:"zdvtoolsSafeFrame",
event:"SETSAFEFRAMEID",url:"",name:window.name,safeFrameUrl:window.location.href,safeFrameId:d.id},"*");continue}try{g.yourMoatListener||(g.yourMoatListener=a._MoatCallback)}catch(l){e.safeFrame=!0;continue}try{if(!e.viewable&&g&&g.google_image_requests&&g.google_image_requests.length)for(var h=0;h<g.google_image_requests.length;h++){var k=g.google_image_requests[h].src;k&&-1==a._msgs.indexOf(k+" ")&&(-1!=k.indexOf("pagead2.googlesyndication.com/activeview?")&&a._adViewable(d,f,e,k),a._msgs+=k+" ")}}catch(l){}}}}a._tickDFA()},
initInsideSafeFrame:function(a,b){parent.postMessage&&(window.addEventListener("message",a.receiveCrossFrameMessage,!1),window.yourMoatListener=window.ZDVTools._MoatCallback)},receiveCrossFrameMessage:function(a){a=a.data;if("string"==typeof a)try{a=JSON.parse(a)}catch(g){return}if(a.agent&&"zdvtoolsSafeFrame"==a.agent){var b=ZDVTools;if("SETSAFEFRAMEID"==a.event)a.safeFrameId&&(window.safeFrameId=a.safeFrameId);else{var c=a.safeFrameId?document.getElementById(a.safeFrameId):null;if(!c||!b.getName(c)||
!c)if(a.name)try{c=document.getElementsByName(a.name)[0],b.getName(c)}catch(g){b.debug("Missing Safeframe in DOM");return}else if(a.safeFrameUrl)for(var d=document.getElementsByTagName("iframe"),f=0;f<d.length;f++){var e=d[f];if(e.src==a.safeFrameUrl){c=e;b.getName(c);break}}"VIEWABLE"==a.event?b._adViewable(c,null,null,a.url):"MOATVIEWABLE"==a.event?b._adViewable(c,null,null,null,"moat"):"MOATFULLVIEWABLE"==a.event&&b._adViewable(c,null,null,null,"moatfull")}}},initDFP:function(){var a=ZDVTools&&
ZDVTools.win?ZDVTools.win:window;a.googletag=a.googletag||{};a.googletag.cmd=a.googletag.cmd||[];googletag.cmd.push(function(){var a=window.ZDVTools?window.ZDVTools:top.ZDVTools;a.timings.DFPinit={timestamp:(new Date).getTime(),timing:window.performance&&performance.now?a.roundTiming(performance.now()):null};googletag.pubads().addEventListener("slotRenderEnded",function(a){var b=window.ZDVTools||top.ZDVTools,f=b.getAd(a.slot.getSlotId().toString());f.adUnitPath=a.slot.getAdUnitPath();f.creativeId=
a.creativeId;f.lineItemId=a.lineItemId;f.containerId=a.slot.getSlotElementId();f.correlatorId=googletag.pubads().getCorrelator();f.DFPRendered={timestamp:(new Date).getTime(),timing:b.roundTiming(b.win.performance.now())};try{f.size=a.size[0]+"x"+a.size[1],f.width=a.size[0],f.height=a.size[1]}catch(e){}if(a.isEmpty&&(f.isEmpty=!0,f.errors.push("DFPEMPTYAD"),f.slowAd))try{b.win.clearTimeout(f.slowAd),f.slowAd=null}catch(e){}f.slot=a.slot;try{f.uuid=a.slot.getTargeting("zc")[0]||null}catch(e){}a=googletag.pubads().j||
{};a.zcp&&(zdv._UUID=a.zcp)});googletag.pubads().addEventListener("impressionViewable",function(a){var b=window.ZDVTools||top.ZDVTools,f=a.slot.getSlotId().toString(),e=b.getAd(f);e.adUnitPath||(e.adUnitPath=a.slot.getAdUnitPath());e.creativeId||(e.creativeId=a.creativeId);e.lineItemId||(e.lineItemId=a.lineItemId);e.containerId||(e.containerId=a.slot.getSlotElementId());e.correlatorId||(e.correlatorId=googletag.pubads().getCorrelator());e.slot||(e.slot=a.slot);e.viewable||b._adViewable(document.getElementById(a.slot.getSlotId().getDomId()),
f,e,"https://pagead2.googlesyndication.com/activeview?id=osdim")});a=googletag.pubads();a.refresh_orig=a.refresh;a.refresh=function(a,b){var f=window.ZDVTools?window.ZDVTools:top.ZDVTools;a||(a=googletag.pubads().getSlots());for(var e=0;e<a.length;e++){var g=a[e];g&&g.getSlotId&&(g=g.getSlotId().toString(),f.getAd(g,"addnew"))}googletag.pubads().refresh_orig(a,b)}})},init:function(a,b){if(document.addEventListener&&window.performance){if(!window.performance.now){Date.now=Date.now||function(){return(new Date).getTime()};
var c=performance.timing&&performance.timing.navigationStart?performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-c}}try{if(window.parent&&window.parent.document&&window.parent.document.body&&window.frameElement&&(window.yourMoatListener=a._MoatCallback),window.parent!=window&&window.parent.ZDVTools||window.frameElement&&window.frameElement.id&&-1!=window.frameElement.id.indexOf("google_ads_iframe"))return}catch(d){return a.initInsideSafeFrame(a,b)}a.self=
a;a.win=b&&b.window?b.window:window;b&&b.onLoad&&a.onLoaded.push(b.onLoad);b&&b.onLoaded&&a.onLoaded.push(b.onLoaded);b&&b.onViewed&&a.onViewable.push(b.onViewed);b&&b.onViewable&&a.onViewable.push(b.onViewable);a.enableDebug=b&&"undefined"!==typeof b.enableDebug?b.enableDebug:a.enableDebug;a.enableDebug=b&&"undefined"!==typeof b.debug?b.debug:a.enableDebug;try{-1!=top.window.location.search.indexOf("zdvtoolsdebug")&&(a.enableDebug=!0)}catch(d){}a.slowAdThreshold=b&&"undefined"!==typeof b.slowAdThreshold?
b.slowAdThreshold:a.slowAdThreshold;b&&b.UUID&&(a._UUID=b.UUID);b&&b.gcp&&(a._UUID=b.gcp);b&&b.initTiming&&(a.timings.init=b.initTiming);a.win.yourMoatListener||(a.win.yourMoatListener=a._MoatCallback);a.win.addEventListener("message",a.receiveCrossFrameMessage,!1);a.initDFP();a._tickerInterval=a.win.setInterval(a._tick,100);setTimeout(a.throttleDown,22E3);return a}}};ZDVTools.init(ZDVTools,"undefined"!==typeof window.ZDVOptions?window.ZDVOptions:null)};
